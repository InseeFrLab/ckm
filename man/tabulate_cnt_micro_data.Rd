% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/generer_tableau.R
\name{tabulate_cnt_micro_data}
\alias{tabulate_cnt_micro_data}
\title{Build contingency table with margins from microdata}
\usage{
tabulate_cnt_micro_data(
  df,
  rk_var = "rkey",
  cat_vars = NULL,
  hrc_vars = NULL,
  num_var = NULL,
  marge_label = "Total",
  freq_empiriq = FALSE
)
}
\arguments{
\item{df}{data.frame. Input microdata}

\item{rk_var}{Character. Individual key variable (NULL for no keys)}

\item{cat_vars}{Character vector. Categorical variables}

\item{hrc_vars}{Named list. Hierarchical variables}

\item{num_var}{Character. Numerical variable to aggregate}

\item{marge_label}{Character. Margin label (default: "Total")}

\item{freq_empiriq}{Logical. Generate empirical frequencies? (default: FALSE)}
}
\value{
Tibble or list with table and frequencies
}
\description{
Constructs a complete contingency table with all possible margins from
microdata, including cell keys and optional numerical aggregation.
}
\examples{
\dontrun{
library(dplyr)
data("dtest")
tab_comptage <- tabulate_cnt_micro_data(
  df = dtest,
  rk_var = NULL,
  cat_vars = c("DIPLOME", "SEXE", "AGE"),
  hrc_vars = list(GEO = c("REG", "DEP")),
  marge_label = "Total"
)

# With numerical variable to aggregate
tab_comptage_num <- tabulate_cnt_micro_data(
  df = dtest |> mutate(NUM = 12),
  rk_var = NULL,
  cat_vars = c("DIPLOME", "SEXE", "AGE"),
  hrc_vars = list(GEO = c("REG", "DEP")),
  num_var = "NUM",
  marge_label = "Total"
)
}
}
