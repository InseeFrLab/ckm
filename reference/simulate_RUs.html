<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Compare risk and utility across multiple scenarios with multiple simulations — simulate_RUs • ckm</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Compare risk and utility across multiple scenarios with multiple simulations — simulate_RUs"><meta name="description" content="Measures risk and utility from a table across multiple randomly generated
record key sets and multiple parameter combinations."><meta property="og:description" content="Measures risk and utility from a table across multiple randomly generated
record key sets and multiple parameter combinations."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ckm</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Package Contents</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/quickstart-ckm.html">Quick Start: Applying the Cell Key Method</a></li>
    <li><a class="dropdown-item" href="../articles/using-ckm-package.html">Applying the Cell Key Method with the `ckm` package</a></li>
    <li><a class="dropdown-item" href="../articles/utiliser-ckm.html">Appliquer la méthode des clés aléatoires</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/inseefrlab/ckm" aria-label="GitHub"><span class="fa fa-github"></span> Source Code</a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Compare risk and utility across multiple scenarios with multiple simulations</h1>
      <small class="dont-index">Source: <a href="https://github.com/InseeFrLab/ckm/blob/main/R/mesurer_RU.R" class="external-link"><code>R/mesurer_RU.R</code></a></small>
      <div class="d-none name"><code>simulate_RUs.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Measures risk and utility from a table across multiple randomly generated
record key sets and multiple parameter combinations.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">simulate_RUs</span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  <span class="va">cat_vars</span>,</span>
<span>  hrc_vars <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">parametres</span>,</span>
<span>  <span class="va">confident</span>,</span>
<span>  gv <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  pv <span class="op">=</span> <span class="fl">20</span>,</span>
<span>  n_sim <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  parallel <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  max_cores <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  size_workers <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-df">df<a class="anchor" aria-label="anchor" href="#arg-df"></a></dt>
<dd><p>data.frame. Input microdata</p></dd>


<dt id="arg-cat-vars">cat_vars<a class="anchor" aria-label="anchor" href="#arg-cat-vars"></a></dt>
<dd><p>Character vector. Categorical variables</p></dd>


<dt id="arg-hrc-vars">hrc_vars<a class="anchor" aria-label="anchor" href="#arg-hrc-vars"></a></dt>
<dd><p>Named list. Hierarchical variables</p></dd>


<dt id="arg-parametres">parametres<a class="anchor" aria-label="anchor" href="#arg-parametres"></a></dt>
<dd><p>data.frame. Parameter combinations to test with columns D, V, js</p></dd>


<dt id="arg-confident">confident<a class="anchor" aria-label="anchor" href="#arg-confident"></a></dt>
<dd><p>integer. Official confidentiality threshold</p></dd>


<dt id="arg-gv">gv<a class="anchor" aria-label="anchor" href="#arg-gv"></a></dt>
<dd><p>integer. Threshold defining large counts (default: 50)</p></dd>


<dt id="arg-pv">pv<a class="anchor" aria-label="anchor" href="#arg-pv"></a></dt>
<dd><p>integer. Threshold defining small counts (default: 20)</p></dd>


<dt id="arg-n-sim">n_sim<a class="anchor" aria-label="anchor" href="#arg-n-sim"></a></dt>
<dd><p>integer. Number of simulations (default: 10)</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>integer. Random seed number. If NULL, a default value is randomly drawn</p></dd>


<dt id="arg-parallel">parallel<a class="anchor" aria-label="anchor" href="#arg-parallel"></a></dt>
<dd><p>logical. If TRUE, calculations are parallelized (advanced, default: FALSE)</p></dd>


<dt id="arg-max-cores">max_cores<a class="anchor" aria-label="anchor" href="#arg-max-cores"></a></dt>
<dd><p>integer. Maximum number of parallel workers (advanced, default: 4)</p></dd>


<dt id="arg-size-workers">size_workers<a class="anchor" aria-label="anchor" href="#arg-size-workers"></a></dt>
<dd><p>integer. Memory size in GB allocated to each thread during
parallel calculation (advanced). NULL by default: program manages size automatically</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>data.frame with n_sim * nrow(parametres) rows</p>
    </div>
    <div class="section level2">
    <h2 id="random-seed">Random seed<a class="anchor" aria-label="anchor" href="#random-seed"></a></h2>


<p>The random seed ensures work reproducibility. Additionally, to ensure results
are comparable between scenarios, the program ensures the same record key sets
are used. Therefore, when no random seed is provided, the program randomly
draws one automatically.</p>
    </div>
    <div class="section level2">
    <h2 id="parallelization">Parallelization<a class="anchor" aria-label="anchor" href="#parallelization"></a></h2>


<p>Parallelizing calculations allows using more computational power for simulations,
generally providing appreciable time savings. Here, the n_sim simulations are
distributed across multiple cores. Parallelization will be beneficial when the
time to perform simulations for a given scenario exceeds the time to create workers.
If the number of workers requested by the user exceeds the number of available workers,
then the program will actually use <code>future::availableCores() - 1</code> workers.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">parametres</span> <span class="op">&lt;-</span> <span class="fu"><a href="build_parameters_table.html">build_parameters_table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">15</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">20</span><span class="op">)</span>, js <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">res_sim_RUs</span> <span class="op">&lt;-</span> <span class="fu">simulate_RUs</span><span class="op">(</span></span></span>
<span class="r-in"><span>  df <span class="op">=</span> <span class="va">dtest</span>,</span></span>
<span class="r-in"><span>  cat_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"REG"</span>, <span class="st">"DIPLOME"</span>, <span class="st">"SEXE"</span>, <span class="st">"AGE"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  parametres <span class="op">=</span> <span class="va">parametres</span>,</span></span>
<span class="r-in"><span>  confident <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>  n_sim <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>  seed <span class="op">=</span> <span class="fl">1234</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Julien Jamme.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

